# =============================================================================
# ğŸš€ ì»¤ìŠ¤í…€ ì„œë²„ ë°°í¬ ì›Œí¬í”Œë¡œìš° (ì˜µì…˜ 2: ì„œë²„ ë°°í¬)
# 
# ğŸ“Š ë°°í¬ ì „ëµ ë¹„êµ:
# 
# ì˜µì…˜ 1 (ì •ì  ë°°í¬) â†’ ë³„ë„ ì •ì  í˜¸ìŠ¤íŒ… ì„œë¹„ìŠ¤ ì‚¬ìš©
# âœ… ì¥ì : ê°„ë‹¨, ì €ë ´, ë¹ ë¦„, CDN ìë™ í™œìš©
# âŒ ë‹¨ì : API Routes ë¶ˆê°€, SSR ë¶ˆê°€, ë™ì  ê¸°ëŠ¥ ì œí•œ
# ğŸ’° ë¹„ìš©: ì›” $1-10 (ì •ì  í˜¸ìŠ¤íŒ… ì„œë¹„ìŠ¤)
# 
# ì˜µì…˜ 2 (ì„œë²„ ë°°í¬) â†’ ì´ í…œí”Œë¦¿ ì‚¬ìš© â­
# âœ… ì¥ì : ëª¨ë“  Next.js ê¸°ëŠ¥, API Routes, SSR, ì™„ì „í•œ ì œì–´ê¶Œ
# âŒ ë‹¨ì : ì„œë²„ ê´€ë¦¬, ë³µì¡ì„±, ìš´ì˜ ë¶€ë‹´
# ğŸ’° ë¹„ìš©: ì›” $10-50+ (ì„œë²„ ì¸ìŠ¤í„´ìŠ¤ + ê´€ë¦¬ ì‹œê°„)
# 
# ì˜µì…˜ 3 (Vercel) â†’ deploy-vercel.yml.template ì‚¬ìš©  
# âœ… ì¥ì : ëª¨ë“  ê¸°ëŠ¥ + ìë™ ê´€ë¦¬, ê¸€ë¡œë²Œ CDN, ê°„í¸í•¨
# âŒ ë‹¨ì : ë¹„ìš© ì¦ê°€, í”Œë«í¼ ì¢…ì†ì„±, ì œí•œëœ ì»¤ìŠ¤í„°ë§ˆì´ì§•
# ğŸ’° ë¹„ìš©: ì›” $0-100+ (ì‚¬ìš©ëŸ‰ ê¸°ë°˜)
#
# ğŸ¯ ì„ íƒ ê°€ì´ë“œ:
# - ë‹¨ìˆœí•œ ëœë”©í˜ì´ì§€/í¬íŠ¸í´ë¦¬ì˜¤ â†’ ì˜µì…˜ 1
# - ë³¸ê²©ì ì¸ ì›¹ì•± (API, ì‹¤ì‹œê°„ ê¸°ëŠ¥) â†’ ì˜µì…˜ 2 ë˜ëŠ” 3
# - ë¹ ë¥¸ í”„ë¡œí† íƒ€ì…, ìŠ¤íƒ€íŠ¸ì—… â†’ ì˜µì…˜ 3
# - ì—”í„°í”„ë¼ì´ì¦ˆ, ì™„ì „í•œ ì œì–´ â†’ ì˜µì…˜ 2
#
# í™œì„±í™” ë°©ë²•:
# 1. íŒŒì¼ëª…ì„ deploy-custom-server.ymlë¡œ ë³€ê²½
# 2. ë°°í¬ ë°©ì‹ ì„ íƒ (Docker ê¶Œì¥)
# 3. GitHub Secrets ì„¤ì •
# 4. ì£¼ì„ í•´ì œ í›„ ì»¤ë°‹
# =============================================================================

# name: ğŸš€ ì»¤ìŠ¤í…€ ì„œë²„ ë°°í¬
# 
# on:
#   push:
#     branches: [ main ]  # ë˜ëŠ” developì—ì„œë„ ë°°í¬í•˜ë ¤ë©´ ì¶”ê°€
#   workflow_dispatch:     # ìˆ˜ë™ ë°°í¬ ë²„íŠ¼ í™œì„±í™”
# 
# permissions:
#   contents: read
# 
# jobs:
#   deploy:
#     name: ğŸ–¥ï¸ ì„œë²„ ë°°í¬
#     runs-on: ubuntu-latest
#     timeout-minutes: 20
#     environment: production  # ë°°í¬ ìŠ¹ì¸ ê³¼ì • ì¶”ê°€ (ì„ íƒ)
#     
#     steps:
#       - name: ğŸ“¥ ì½”ë“œ ì²´í¬ì•„ì›ƒ
#         uses: actions/checkout@v4
# 
#       - name: ğŸŸ¢ Node.js 22.12.0 ì„¤ì •
#         uses: actions/setup-node@v4
#         with:
#           node-version: '22.12.0'
#           cache: 'npm'
# 
#       - name: ğŸ“¦ ì˜ì¡´ì„± ì„¤ì¹˜
#         run: npm ci
# 
#       - name: ğŸ—ï¸ í”„ë¡œë•ì…˜ ë¹Œë“œ
#         run: npm run build
#         env:
#           # GitHub Secretsì—ì„œ í™˜ê²½ë³€ìˆ˜ ê°€ì ¸ì˜¤ê¸°
#           NEXT_PUBLIC_API_URL: ${{ secrets.NEXT_PUBLIC_API_URL }}
#           NEXT_PUBLIC_MAP_API_KEY: ${{ secrets.NEXT_PUBLIC_MAP_API_KEY }}
#           NEXT_PUBLIC_DOMAIN: ${{ secrets.NEXT_PUBLIC_DOMAIN }}
# 
#       # =============================================================================
#       # ğŸ³ Docker ë°°í¬ (ê¶Œì¥ ë°©ë²•)
#       # 
#       # ì™œ Dockerë¥¼ ì¶”ì²œí•˜ë‚˜?
#       # âœ… í™˜ê²½ ì¼ê´€ì„±: ê°œë°œ/ìŠ¤í…Œì´ì§•/í”„ë¡œë•ì…˜ ë™ì¼ í™˜ê²½
#       # âœ… ì‰¬ìš´ ë¡¤ë°±: docker run old-version í•œ ì¤„ë¡œ ë¡¤ë°±
#       # âœ… í™•ì¥ì„±: ì—¬ëŸ¬ ì„œë²„ì— ë™ì¼í•˜ê²Œ ë°°í¬ ê°€ëŠ¥
#       # âœ… ê²©ë¦¬ì„±: í˜¸ìŠ¤íŠ¸ ì‹œìŠ¤í…œê³¼ ë…ë¦½ì  ì‹¤í–‰
#       # =============================================================================
#       
#       # Step 1: Docker ì´ë¯¸ì§€ ë¹Œë“œ
#       # - name: ğŸ³ Docker ì´ë¯¸ì§€ ë¹Œë“œ
#       #   run: |
#       #     docker build -t dongjeop-front:${{ github.sha }} .
#       #     docker tag dongjeop-front:${{ github.sha }} dongjeop-front:latest
#       
#       # Step 2: ì„œë²„ì— ë°°í¬  
#       # - name: ğŸš€ ì„œë²„ì— Docker ë°°í¬
#       #   uses: appleboy/ssh-action@v0.1.5
#       #   with:
#       #     host: ${{ secrets.SERVER_HOST }}
#       #     username: ${{ secrets.SERVER_USER }}
#       #     key: ${{ secrets.SERVER_SSH_KEY }}
#       #     port: ${{ secrets.SERVER_PORT || 22 }}
#       #     script: |
#       #       # ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ì •ë¦¬
#       #       docker stop dongjeop-front 2>/dev/null || true
#       #       docker rm dongjeop-front 2>/dev/null || true
#       #       
#       #       # ìƒˆ ì»¨í…Œì´ë„ˆ ì‹¤í–‰
#       #       docker run -d \
#       #         --name dongjeop-front \
#       #         -p 80:3000 \
#       #         --restart unless-stopped \
#       #         -e NEXT_PUBLIC_API_URL="${{ secrets.NEXT_PUBLIC_API_URL }}" \
#       #         dongjeop-front:latest
#       #       
#       #       # í—¬ìŠ¤ì²´í¬
#       #       sleep 10
#       #       curl -f http://localhost || exit 1
#       #       echo "âœ… ë°°í¬ ì„±ê³µ! ì„œë¹„ìŠ¤ê°€ ì •ìƒ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤."
# 
#       
#       # =============================================================================
#       # ğŸ“ ëŒ€ì•ˆ: ì§ì ‘ íŒŒì¼ ë°°í¬ (Docker ì—†ì´)
#       # 
#       # ì–¸ì œ ì‚¬ìš©í•˜ë‚˜?
#       # - Docker ì„¤ì¹˜ê°€ ì–´ë ¤ìš´ í™˜ê²½
#       # - ê¸°ì¡´ ì„œë²„ í™˜ê²½ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œ
#       # - ë‹¨ìˆœí•œ íŒŒì¼ êµì²´ë§Œ í•„ìš”í•  ë•Œ
#       # 
#       # âš ï¸ ì£¼ì˜: Node.js, PM2ê°€ ì„œë²„ì— ë¯¸ë¦¬ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•¨
#       # =============================================================================
#       
#       # ì£¼ì„ í•´ì œí•˜ì—¬ ì‚¬ìš© (Docker ëŒ€ì‹ ):
#       # - name: ğŸ“ ë¹Œë“œ íŒŒì¼ ì„œë²„ë¡œ ì „ì†¡
#       #   uses: burnett01/rsync-deployments@5.2  
#       #   with:
#       #     switches: -avzr --delete
#       #     path: '.next/ package*.json'
#       #     remote_path: /var/www/dongjeop-front/
#       #     remote_host: ${{ secrets.SERVER_HOST }}
#       #     remote_user: ${{ secrets.SERVER_USER }}
#       #     remote_key: ${{ secrets.SERVER_SSH_KEY }}
#       
#       # - name: âš¡ ì„œë¹„ìŠ¤ ì¬ì‹œì‘
#       #   uses: appleboy/ssh-action@v0.1.5
#       #   with:
#       #     host: ${{ secrets.SERVER_HOST }}
#       #     username: ${{ secrets.SERVER_USER }}
#       #     key: ${{ secrets.SERVER_SSH_KEY }}
#       #     script: |
#       #       cd /var/www/dongjeop-front
#       #       npm ci --production
#       #       pm2 restart dongjeop-front || pm2 start npm --name dongjeop-front -- start
#       #       echo "âœ… ë°°í¬ ì™„ë£Œ!"

# =============================================================================
# ğŸ“‹ GitHub Secrets ì„¤ì • ê°€ì´ë“œ
# ê²½ë¡œ: GitHub ì €ì¥ì†Œ â†’ Settings â†’ Secrets and variables â†’ Actions â†’ New secret
# =============================================================================

# ğŸ–¥ï¸ ì„œë²„ ì •ë³´ (í•„ìˆ˜):
# SERVER_HOST: 12.34.56.78 ë˜ëŠ” your-server.com
# SERVER_USER: ubuntu (ë˜ëŠ” ec2-user, root ë“±)  
# SERVER_SSH_KEY: SSH ê°œì¸í‚¤ ì „ì²´ ë‚´ìš© (-----BEGIN RSA PRIVATE KEY----- í¬í•¨)
# SERVER_PORT: 22 (ê¸°ë³¸ê°’, ë‹¤ë¥¸ í¬íŠ¸ ì‚¬ìš© ì‹œ ë³€ê²½)

# ğŸ” í™˜ê²½ë³€ìˆ˜ (í”„ë¡œì íŠ¸ì— ë§ê²Œ):
# NEXT_PUBLIC_API_URL: https://api.dongjeop.com (ë˜ëŠ” https://your-backend.com)
# NEXT_PUBLIC_MAP_API_KEY: Google Maps API í‚¤
# NEXT_PUBLIC_DOMAIN: dongjeop.com (ë˜ëŠ” your-domain.com)

# ğŸ’¡ ì„ íƒì‚¬í•­:
# NEXT_PUBLIC_CDN_URL: CDN ì‚¬ìš© ì‹œ
# NEXT_PUBLIC_ANALYTICS_ID: Google Analytics ì‚¬ìš© ì‹œ

# =============================================================================
# ğŸ“ ì¶”ê°€ ì‘ì—… (ë°°í¬ ë°©ì‹ë³„)
# =============================================================================

# ğŸ³ Docker ì‚¬ìš© ì‹œ (ê¶Œì¥):
# 1. í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— Dockerfile ìƒì„±:
#    ```dockerfile
#    FROM node:20-alpine
#    WORKDIR /app
#    COPY package*.json ./
#    RUN npm ci --production
#    COPY .next ./.next  
#    CMD ["npm", "start"]
#    EXPOSE 3000
#    ```
# 2. .dockerignore ìƒì„± (node_modules, .git ë“± ì œì™¸)

# ğŸ“ ì§ì ‘ ë°°í¬ ì‹œ:
# 1. ì„œë²„ì— Node.js 20+ ì„¤ì¹˜
# 2. PM2 ê¸€ë¡œë²Œ ì„¤ì¹˜: npm install -g pm2
# 3. nginx ì„¤ì • (í¬íŠ¸ 3000 â†’ 80 í”„ë¡ì‹œ)

# =============================================================================  
# ğŸš€ ì‹¤ì œ ë°°í¬ ë‹¨ê³„
# =============================================================================

# 1ë‹¨ê³„: ì¤€ë¹„
# âœ… ì„œë²„ ì¤€ë¹„ (í´ë¼ìš°ë“œ VPS ë˜ëŠ” ìì²´ ì„œë²„)
# âœ… ë„ë©”ì¸ ì—°ê²° (A ë ˆì½”ë“œ ì„¤ì •)
# âœ… GitHub Secrets ì„¤ì •

# 2ë‹¨ê³„: í™œì„±í™”
# âœ… ì´ íŒŒì¼ëª…ì„ deploy-custom-server.ymlë¡œ ë³€ê²½
# âœ… Docker ë°©ì‹ ì£¼ì„ í•´ì œ (ë˜ëŠ” ì§ì ‘ ë°°í¬ ë°©ì‹)  
# âœ… ì»¤ë°‹ & í‘¸ì‹œ â†’ ìë™ ë°°í¬ ì‹œì‘

# 3ë‹¨ê³„: í™•ì¸
# âœ… GitHub Actions íƒ­ì—ì„œ ë°°í¬ ë¡œê·¸ í™•ì¸
# âœ… https://your-domain.com ì ‘ì†í•˜ì—¬ ë™ì‘ í™•ì¸
# âœ… ì„œë²„ì—ì„œ docker ps ë˜ëŠ” pm2 statusë¡œ í”„ë¡œì„¸ìŠ¤ í™•ì¸